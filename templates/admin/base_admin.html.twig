{% extends 'base.html.twig' %}

{% set currentRoute = app.request.attributes.get('_route') %}
{% set page_title = page_title|default('Administration') %}

{% block title %}
	{{ page_title }}
	- Admin
{% endblock %}

{# ✅ IMPORTANT : on utilise block body (pas content) #}
{% block body %}

	<div
		class="admin-shell" id="adminShell">

		{# Overlay mobile #}
		<div class="admin-overlay" id="adminOverlay" aria-hidden="true"></div>

		{# Sidebar #}
		<aside class="admin-sidebar" id="adminSidebar" aria-label="Menu administration">
			<div class="admin-sidebar-head">
				<a href="{{ path('admin_dashboard') }}" class="admin-brand">

					<div class="admin-brand-text">
						<div class="admin-brand-title">Administration</div>
						<div class="admin-brand-subtitle text-slate-600">Forum Mobile ID</div>
					</div>
				</a>

				<button type="button" class="admin-icon-btn d-lg-none" id="adminCloseBtn" aria-label="Fermer le menu">
					<svg width="18" height="18" viewbox="0 0 24 24" fill="none" aria-hidden="true">
						<path d="M18 6L6 18M6 6l12 12" stroke="currentColor" stroke-width="2.2" stroke-linecap="round"/>
					</svg>
				</button>
			</div>

			<nav class="admin-nav" aria-label="Navigation admin">
				<a class="admin-navlink {{ currentRoute == 'admin_dashboard' ? 'is-active' : '' }}" href="{{ path('admin_dashboard') }}">
					<span class="admin-dot"></span>
					Tableau de bord
				</a>

				<a class="admin-navlink {{ currentRoute == 'admin_dates' ? 'is-active' : '' }}" href="{{ path('admin_dates_index') }}">
					<span class="admin-dot"></span>
					Gestions des dates
				</a>

				<a class="admin-navlink {{ currentRoute == 'admin_agenda' ? 'is-active' : '' }}" href="{{ path('admin_agenda_index') }}">
					<span class="admin-dot"></span>
					Gestions d'agenda
				</a>

				<a class="admin-navlink {{ currentRoute == 'admin_registrations' ? 'is-active' : '' }}" href="{{ path('admin_registrations') }}">
					<span class="admin-dot"></span>
					Les inscriptions
				</a>

				<a class="admin-navlink {{ currentRoute == 'admin_partners' ? 'is-active' : '' }}" href="{{ path('admin_partners') }}">
					<span class="admin-dot"></span>
					Partenaires
				</a>
			</nav>

			<div class="admin-sidebar-foot">
				<form method="post" action="{{ path('app_logout') }}">
					<input type="hidden" name="_csrf_token" value="{{ csrf_token('logout') }}">
					<button type="submit" class="btn admin-logout-btn w-100">
						<span class="me-2" aria-hidden="true">
							<svg width="18" height="18" viewbox="0 0 24 24" fill="none">
								<path d="M10 7V6a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-1" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
								<path d="M4 12h10M7 9l-3 3 3 3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
							</svg>
						</span>
						Déconnexion
					</button>
				</form>
			</div>
		</aside>

		{# Main content #}
		<div class="admin-main">
			<header class="admin-topbar">
				<button type="button" class="admin-icon-btn d-lg-none" id="adminOpenBtn" aria-label="Ouvrir le menu">
					<svg width="20" height="20" viewbox="0 0 24 24" fill="none" aria-hidden="true">
						<path d="M4 7h16M4 12h16M4 17h16" stroke="currentColor" stroke-width="2.2" stroke-linecap="round"/>
					</svg>
				</button>

				<div class="admin-topbar-title">
					<div class="fw-extrabold text-slate-900" style="line-height:1.1;">{{ page_title }}</div>
					<div class="small text-slate-600">Espace sécurisé — accès admin</div>
				</div>

				<div class="ms-auto d-none d-md-flex align-items-center gap-2">
					<span class="badge-soft-emerald2">ROLE_ADMIN</span>
				</div>
			</header>

			<main class="admin-content">
				{% block admin_content %}{% endblock %}
			</main>
		</div>

	</div>

{% endblock %}
