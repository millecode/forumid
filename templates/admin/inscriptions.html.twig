{% extends 'admin/base_admin.html.twig' %}

{% set page_title = 'Les inscriptions' %}

{% block admin_content %}

	{# Flash #}
	{% for message in app.flashes('success') %}
		<div class="alert alert-success rounded-4 mb-3">{{ message }}</div>
	{% endfor %}
	{% for message in app.flashes('error') %}
		<div class="alert alert-danger rounded-4 mb-3">{{ message }}</div>
	{% endfor %}

	<div class="card-soft p-4">
		<div class="d-flex align-items-center justify-content-between mb-3">
			<div>
				<div class="fw-extrabold text-slate-900">Liste des inscrits</div>
				<div class="text-slate-600 small">Total :
					{{ inscriptions|length }}</div>
			</div>
		</div>

		<div class="table-responsive">
			<table class="table align-middle mb-0">
				<thead>
					<tr class="text-slate-600 small">
						<th>Nom</th>
						<th>Email</th>
						<th>Tél</th>
						<th>Institution</th>
						<th>Fonction</th>
						<th>Date</th>
						<th class="text-end">Action</th>
					</tr>
				</thead>
				<tbody>
					{% for i in inscriptions %}
						<tr>
							<td class="fw-semibold text-slate-900">{{ i.fullName }}</td>
							<td class="text-slate-700">{{ i.email }}</td>
							<td class="text-slate-700">{{ i.phone }}</td>
							<td class="text-slate-700">{{ i.institution }}</td>
							<td class="text-slate-700">{{ i.role }}</td>
							<td class="text-slate-600 small">{{ i.createdAt ? i.createdAt|date('d/m/Y H:i') : '—' }}</td>
							<td class="text-end">
								<form method="post" action="{{ path('admin_registrations_delete', {id: i.id}) }}" class="d-inline" onsubmit="return confirm('Supprimer cette inscription ?');">
									<input type="hidden" name="_token" value="{{ csrf_token('delete_inscription_' ~ i.id) }}">
									<button type="submit" class="btn btn-sm admin-action-icon" title="Supprimer">
										<svg width="18" height="18" viewbox="0 0 24 24" fill="none" aria-hidden="true">
											<path d="M4 7h16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
											<path d="M10 11v6M14 11v6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
											<path d="M6 7l1 14h10l1-14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
											<path d="M9 7V4h6v3" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
										</svg>
									</button>
								</form>
							</td>
						</tr>
					{% else %}
						<tr>
							<td colspan="7" class="text-center text-slate-600 py-4">
								Aucune inscription pour le moment.
							</td>
						</tr>
					{% endfor %}
				</tbody>
			</table>
		</div>
	</div>

{% endblock %}
